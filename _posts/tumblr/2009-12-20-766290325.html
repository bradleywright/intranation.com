---
layout: post
title: Python virtualenv quickstart with Django
---

<p>One of the solutions to the <a href="http://jessenoller.com/2009/07/17/trapped-in-python-package-send-food/">ghetto of Python package management</a> is to use a sand-boxed Python install like <a href="http://pypi.python.org/pypi/virtualenv">virtualenv</a>. This is the very same technique we use at <a href="http://smarkets.com/">Smarkets</a> to simultaneously run <a href="http://pylonshq.com/">Pylons</a> and <a href="http://djangoproject.com/">Django</a> alongside each other on a single server.</p>

<p>This post is briefly about how to get up and running in a few minutes using virtualenv and Django.</p>

<h2>Install virtualenv</h2>

<p>Installing virtualenv is easy on a Linux or Mac system, but the instructions that follow are Linux (Ubuntu, actually) specific. First you&#8217;ll need setuptools:</p>

<pre><kbd>sudo apt-get install python-setuptools</kbd></pre>

<p>Then we can <kbd>easy_install</kbd> virtualenv:</p>

<pre><kbd>sudo easy_install virtualenv</kbd></pre>

<p>We need to use <kbd>sudo</kbd> here because it has to install to a global location. Don’t worry, this is the last time we’ll need to do something as <var>root</var>.</p>

<h2>Create your virtualenv</h2>

<p><kbd>cd</kbd> to wherever it is you keep your projects (for me, in <var>~/src</var>), and run:</p>

<pre><kbd>virtualenv --no-site-packages venv</kbd></pre>

<p>In this instance I’ve chosen <var>venv</var> as the name for my virtual environment. The <var>&#8212;no-site-packages</var> command tells virtualenv not to symlink the global site packages into my local environment, just take the Python standard library. This is important, because it helps us avoid the dependency difficulties mentioned above.</p>

<p>At this stage you might want to add <var>venv</var> to your list of ignored files, as you don’t want it to be committed to source control:</p>

<pre><kbd>echo "venv" &gt;&gt; .gitignore</kbd></pre>

<h2>Installing Django</h2>

<p>Now, the trick with virtualenv is that it creates its own Python and easy_install binaries, which means you can install/run things specifically in your environment. Let’s install Django:</p>

<pre><kbd>./venv/bin/easy_install django</kbd></pre>

<p>And it’s done. easy. You might also want to install the MySQL bindings and <a href="http://ipython.scipy.org/moin/">IPython</a> for ease of use:</p>

<pre><kbd>./venv/bin/easy_install ipython python-mysql</kbd></pre>

<p>To start a new Django project, you’ll note that a <var>django-admin.py</var> file will have been installed for you in the environment:</p>

<pre><kbd>./venv/bin/django-admin.py startproject myapp</kbd></pre>

<p>Obviously you can skip this step if you have an existing Django project.</p>

<h2>Running Django</h2>

<p>Now the last step, which is probably obvious by now, is to run Django’s runserver with the virtual Python binary:</p>

<pre><kbd>cd myapp</kbd>

<kbd>../venv/bin/python manage.py runserver 0.0.0.0:8000</kbd></pre>

<p>And you’re away!</p>

<h2>Closing</h2>

<p>Just make sure whenever you need to add another package that you install it in the virtualenv, and not in the global packages directory. If you want to deploy using virtualenv, here are <a href="http://code.google.com/p/modwsgi/wiki/VirtualEnvironments">some instructions for using mod_wsgi</a> with virtualenvs.</p>
